<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>LabA</title>
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/styles.css">
</head>
<body class="container mt-4">
    {% include "header.html" %}

    <!--elegir entre los 2 siguientes-->
    <!--link para exportar a pdf-->
    <a href="{{ url_for('exportar_pdf') }}" class="btn btn-danger mb-3" target="_blank">
        Exportar a PDF
    </a>
    <!--botón para exportar a pdf-->
    <form method="POST" action="/">
        <button type="submit" formaction="/exportar_pdf" target="_blank">Exportar PDF</button>
    </form>

    <form method="POST" action="/">
        {% for col in columnas_disponibles %}
            <label>
                <input class="form-check-input" type="checkbox" name="columnas" value="{{ col }}"
                {% if col in columnas %}checked{% endif %}>
                {{ col }}
            </label><br>
        {% endfor %}
        <button type="submit">Aplicar</button>
        <button type="button" id="toggle-all">(de)seleccionar todo</button>
        <br>

        <h1 class="mb-4">Listado de proyectos</h1>

        <table class="table table-striped table-bordered to-pdf">
            <thead class="table-dark">
                <tr>
                    {% for col in columnas %}
                        <th>{{ col }}</th>
                    {% endfor %}
                </tr>
                <!-- fila de filtros -->
                <tr>
                    {% for col in columnas %}
                        <th>
                            <input type="text" name="filtro_{{ col }}" placeholder="Buscar {{ col }}" value="{{ filtros.get(col, '') }}">
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                <!-- fila de sumatorias -->
                <tr>
                    {% for cell in sum_row %}
                        <td><strong>{{ cell|default_dash }}</strong></td>
                    {% endfor %}
                </tr>

                <!-- filas normales -->
                {% for row in rows %}
                    <tr>
                        {% for cell in row %}
                            <td>{{ cell|default_dash }}</td>
                        {% endfor %}
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </form>

    



    <!--<table id="proyectos" class="table table-striped table-bordered to-pdf">
        <thead class="table-dark">
            <tr>
                <th>ID</th>
                <th>Fecha registro</th>
                <th>Email</th>
                <th>Nombre</th>
                <th>Carrera</th>
                <th>Cargo</th>
                <th>Sede</th>
                <th>Proyecto</th>
                <th>Descripción</th>
                <th>Tipo</th>
                <th>Herramienta</th>
                <th>Materiales</th>
                <th>Cant. prototipos</th>
                <th>Justificación</th>
                <th>Fecha necesidad</th>
                <th>Tiempo estimado</th>
                <th>Otros comentarios</th>
                <th>Origen material</th>
                <th>Estado</th>
            </tr>
        </thead>
        <tbody>
            {% for p in proyectos %}
            <tr>
                <td>{{ p[0]|default_dash }}</td>
                <td>{{ p[1]|default_dash }}</td>
                <td>{{ p[2]|default_dash }}</td>
                <td>{{ p[3]|default_dash }}</td>
                <td>{{ p[4]|default_dash }}</td>
                <td>{{ p[5]|default_dash }}</td>
                <td>{{ p[6]|default_dash }}</td>
                <td>{{ p[7]|default_dash }}</td>
                <td>{{ p[8]|default_dash }}</td>
                <td>{{ p[9]|default_dash }}</td>
                <td>{{ p[10]|default_dash }}</td>
                <td>{{ p[11]|default_dash }}</td>
                <td>{{ p[12]|default_dash }}</td>
                <td>{{ p[13]|default_dash }}</td>
                <td>{{ p[14]|default_dash }}</td>
                <td>{{ p[15]|default_dash }}</td>
                <td>{{ p[16]|default_dash }}</td>
                <td>{{ p[17]|default_dash }}</td>
                <td>{{ p[18]|default_dash }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>-->
    <script src="../static/js/script.js"></script>
</body>
</html>
